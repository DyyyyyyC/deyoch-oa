---
inclusion: always
---

# 代码质量分析规则

当分析代码时，请重点关注以下方面并提供改进建议：

## 1. 代码异味检测

### Java 代码
- **长方法**：方法超过50行需要拆分
- **长类**：类超过500行需要重构
- **重复代码**：识别并建议提取公共方法
- **过多参数**：方法参数超过5个建议使用对象封装
- **复杂条件**：嵌套超过3层建议简化
- **命名规范**：
  - 类名使用 PascalCase
  - 方法和变量使用 camelCase
  - 常量使用 UPPER_SNAKE_CASE
  - 包名使用小写

### Vue/JavaScript 代码
- **组件大小**：单个组件不超过300行
- **方法复杂度**：单个方法不超过20行
- **变量命名**：使用有意义的名称
- **ES6+ 语法**：优先使用现代 JavaScript 语法

## 2. 设计模式和架构

### SOLID 原则检查
- **单一职责**：每个类只负责一个功能
- **开闭原则**：对扩展开放，对修改关闭
- **里氏替换**：子类可以替换父类
- **接口隔离**：接口应该小而专一
- **依赖倒置**：依赖抽象而非具体实现

### 常见设计模式建议
- **工厂模式**：对象创建复杂时
- **策略模式**：多种算法选择时
- **观察者模式**：事件通知时
- **单例模式**：全局唯一实例时

## 3. 最佳实践

### 错误处理
- 使用具体的异常类型
- 提供有意义的错误消息
- 记录异常日志
- 避免空的 catch 块

### 安全性
- 输入验证和清理
- SQL 注入防护
- XSS 攻击防护
- 敏感信息加密

### 性能优化
- 避免 N+1 查询问题
- 合理使用缓存
- 数据库索引优化
- 前端资源压缩和懒加载

## 4. 可读性和可维护性

### 注释规范
- 类和方法必须有 JavaDoc
- 复杂逻辑需要行内注释
- 注释要说明"为什么"而不是"是什么"

### 代码格式
- 统一的缩进（4个空格）
- 合理的空行分隔
- 一致的括号风格
- 适当的行长度（120字符以内）

## 5. 测试相关

### 测试覆盖率
- 单元测试覆盖率 > 80%
- 关键业务逻辑 100% 覆盖
- 边界条件测试

## 注意事项
- 所有建议必须确保不破坏现有功能
- 优先考虑可读性和可维护性
- 提供具体可行的改进方案

**语言**：默认中文，技术术语准确，主动澄清需求。