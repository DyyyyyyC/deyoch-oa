# 主配置文件 - 所有配置集中在一个文件，使用环境变量注入
spring:
  # 应用基本信息
  application:
    name: deyoch-oa-backend
  # 环境激活配置
  profiles:
    active: dev  # 默认激活开发环境
  # 数据源配置
  datasource:
    # 数据库连接URL，使用环境变量注入
    url: jdbc:mysql://${oa.db.host}:${oa.db.port}/${oa.db.name}?useUnicode=true&characterEncoding=utf-8&useSSL=${oa.db.ssl}&serverTimezone=Asia/Shanghai
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: ${oa.db.username}  # 数据库用户名
    password: ${oa.db.password}  # 数据库密码
    # HikariCP连接池配置
    hikari:
      maximum-pool-size: ${oa.db.pool.max}  # 最大连接数
      minimum-idle: ${oa.db.pool.min}  # 最小空闲连接数
      connection-timeout: ${oa.db.pool.timeout}  # 连接超时时间
      idle-timeout: ${oa.db.pool.idle}  # 空闲连接超时时间
      max-lifetime: ${oa.db.pool.lifetime}  # 连接最大生命周期

# 服务器配置
server:
  port: ${oa.server.port}  # 服务器端口
  servlet:
    context-path: /api  # 应用上下文路径
  tomcat:
    max-threads: ${oa.server.tomcat.maxThreads}  # Tomcat最大线程数
    min-spare-threads: ${oa.server.tomcat.minSpareThreads}  # Tomcat最小空闲线程数

# MyBatis-Plus配置
mybatis-plus:
  mapper-locations: classpath:mapper/*.xml  # Mapper映射文件路径
  type-aliases-package: com.deyoch.entity  # 实体类包路径
  configuration:
    map-underscore-to-camel-case: true  # 开启下划线转驼峰
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  # SQL日志实现

# JWT配置
jwt:
  secret: ${oa.jwt.secret}  # JWT密钥
  expire: ${oa.jwt.expire}  # 过期时间，单位毫秒
  token-header: ${oa.jwt.header}  # 请求头名称
  token-prefix: ${oa.jwt.prefix}  # 令牌前缀

# 日志配置
logging:
  level:
    com.deyoch: ${oa.log.level}  # 应用日志级别
    org.springframework: ${oa.log.spring.level}  # Spring框架日志级别
  file:
    name: ${oa.log.file.name}  # 日志文件路径
  logback:
    rollingpolicy:
      max-file-size: ${oa.log.file.maxSize}  # 单个日志文件最大大小
      max-history: ${oa.log.file.maxHistory}  # 保留的日志文件数量
      file-name-pattern: ${oa.log.file.pattern}  # 日志文件命名模式